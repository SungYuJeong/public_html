
    <!-- Modal -->

<script>

// jQuery(document).ready(function () {
//     var $ = jQuery;
//     let down;
//     var myRecorder = {
//             objects: {
//                 context: null,
//                 stream: null,
//                 recorder: null
//             },
//             init: function () {
//                 if (null === myRecorder.objects.context) {
//                     myRecorder.objects.context = new (
//                             window.AudioContext || window.webkitAudioContext
//                             );
//                 }
//             },
//             start: function () {
//                 var options = {audio: true, video: false};
//                 navigator.mediaDevices.getUserMedia(options).then(function (stream) {
//                     myRecorder.objects.stream = stream;
//                     myRecorder.objects.recorder = new Recorder(
//                             myRecorder.objects.context.createMediaStreamSource(stream),
//                             {numChannels: 1}
//                     );
//                     myRecorder.objects.recorder.record();
//                 }).catch(function (err) {});
//             },
//             stop: function (listObject) {
//                 if (null !== myRecorder.objects.stream) {
//                     myRecorder.objects.stream.getAudioTracks()[0].stop();
//                 }
//                 if (null !== myRecorder.objects.recorder) {

//                     myRecorder.objects.recorder.stop();

//                     // Validate object
//                     if (null !== listObject
//                             && 'object' === typeof listObject
//                             && listObject.length > 0) {
//                         // Export the WAV file
//                         myRecorder.objects.recorder.exportWAV(function (blob) {
//                             var url = (window.URL || window.webkitURL)
//                                     .createObjectURL(blob);

//                             // Prepare the playback
//                             var audioObject = $('<audio controls></audio>')
//                                         .attr('src', url);

//                                 // Prepare the download link
//                                 var downloadObject = $('<a>&#9660;</a>')
//                                         .attr('href', url)
//                                         .attr('download', new Date().toUTCString() + '.wav');
//                                 console.log(downloadObject);
//                                 downloadObject.click;

//                                 // Wrap everything in a row
//                                 var holderObject = $('<div class="row"></div>')
//                                         .append(audioObject)
//                                         .append(downloadObject);

//                                 // Append to the list
//                                 listObject.append(holderObject);
//                             // Prepare the playback
//                             var audioObject = $('<audio controls></audio>')
//                                     .attr('src', url);

//                             // Prepare the download link
//                             var downloadObject = $('<a>&#9660;</a>')
//                                     .attr('href', url)
//                                     .attr('download', 'outfile.wav');

//                             down = downloadObject;

//                             // Wrap everything in a row
//                           var holderObject = $('<div class="row"></div>')
//                                   .append(audioObject)
//                                 //   .append(downloadObject);

//                         //   // Append to the list
//                           listObject.append(holderObject);
//                         });

//                     }
//                 }
//             }
//     };

//     // Prepare the recordings list
//     var listObject = $('[data-role="recordings"]');

//     // Prepare the record button
//     $('[data-role="controls"] > button').click(function () {
//         // Initialize the recorder
//         myRecorder.init();

//         // Get the button state
//         var buttonState = !!$(this).attr('data-recording');

//         // Toggle
//         if (!buttonState) {
//             $(this).attr('data-recording', 'true');
//             myRecorder.start();
//         } else {
//             $(this).attr('data-recording', '');
//             console.log(down);
//             down.click();
//             myRecorder.stop(listObject);
//         }
//     });
// });
jQuery(document).ready(function () {
                var $ = jQuery;
                var myRecorder = {
                      objects: {
                          context: null,
                          stream: null,
                          recorder: null
                      },
                      init: function () {
                          if (null === myRecorder.objects.context) {
                              myRecorder.objects.context = new (
                                      window.AudioContext || window.webkitAudioContext
                                      );
                          }
                      },
                      start: function () {
                          var options = {audio: true, video: false};
                          navigator.mediaDevices.getUserMedia(options).then(function (stream) {
                              myRecorder.objects.stream = stream;
                              myRecorder.objects.recorder = new Recorder(
                                      myRecorder.objects.context.createMediaStreamSource(stream),
                                      {numChannels: 1}
                              );
                              myRecorder.objects.recorder.record();
                          }).catch(function (err) {});
                      },
                      stop: function (listObject) {
                          if (null !== myRecorder.objects.stream) {
                              myRecorder.objects.stream.getAudioTracks()[0].stop();
                          }
                          if (null !== myRecorder.objects.recorder) {

                              myRecorder.objects.recorder.stop();

                              // Validate object
                              if (null !== listObject
                                      && 'object' === typeof listObject
                                      && listObject.length > 0) {
                                  // Export the WAV file
                                  myRecorder.objects.recorder.exportWAV(function (blob) {
                                      var url = (window.URL || window.webkitURL)
                                              .createObjectURL(blob);

                                      // Prepare the playback
                                      var audioObject = $('<audio controls></audio>')
                                              .attr('src', url);

                                      // Prepare the download link
                                      var downloadObject = $('<a>&#9660;</a>')
                                              .attr('href', url)
                                              .attr('download', new Date().toUTCString() + '.wav');

                                      // Wrap everything in a row
                                      var holderObject = $('<div class="row"></div>')
                                              .append(audioObject)
                                              .append(downloadObject);

                                      // Append to the list
                                      listObject.append(holderObject);
                                  });

                              }
                          }
                      }
                };

                // Prepare the recordings list
                var listObject = $('[data-role="recordings"]');

                // Prepare the record button
                $('[data-role="controls"] > button').click(function () {
                    // Initialize the recorder
                    myRecorder.init();

                    // Get the button state
                    var buttonState = !!$(this).attr('data-recording');

                    // Toggle
                    if (!buttonState) {
                        $(this).attr('data-recording', 'true');
                        myRecorder.start();
                    } else {
                        $(this).attr('data-recording', '');
                        myRecorder.stop(listObject);
                    }
                });
            });
</script>

          


<div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">학습하기</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        </div>
        <div class="modal-body">
        <!-- <div onclick="play()"><img src="images/speaker.png" width="25px" style="cursor: pointer;"></div> -->
        <div style="margin-bottom: 10px;">
            <a href='javascript:void(0);' onclick="play()" class="learn-button">단어듣기</a>
            <span class="holder">
                <span data-role="controls">
                    <button>발음체크</button>
                </span>
                <span data-role="recordings"></span>
                <span style="font-size:10px;">(녹음이 끝나면 다시 클릭해주세요)</span>
            </span>



            <!-- <span id="circle" class="icon-circle" style="display: none; color: rgb(255,0,0);"></span>
            <span id="stars" style="display: none; font-size: 14px;">
            <span class="icon-check2"></span> 내 발음 정확도: 
            <i class="ion-ios-star" style="color: #f7b71d"></i>
            <i class="ion-ios-star" style="color: #f7b71d"></i>
            <i class="ion-ios-star" style="color: #f7b71d"></i>
            <i class="ion-ios-star" style="color: #f7b71d"></i>
            <i class="ion-ios-star"></i>
            </span> -->
            <audio id="audio_play" src="v.mp3"></audio>
        </div>
        <div>
            <span style="font-size: 20px; font-weight: bold;">misunderstanding</span>
            <span style="font-size: 14px; margin-left: 10px;">
            <i class="ion-ios-star" style="color: #E6384B"></i>
            <i class="ion-ios-star" style="color: #E6384B"></i>
            <i class="ion-ios-star" style="color: #E6384B"></i>
            <i class="ion-ios-star" style="color: #E6384B"></i>
            <!-- <i class="ion-ios-star"></i> -->
            </span><br>
            1. 명사) 오해, 착오 <br>
            2. 명사) (가벼운) 언쟁[불화] <br>
        <p style="font-size: 14px;">* 예문: We cannot let animosity and <b>misunderstandings</b> get in the way of our efforts toward peace and co-existence.</p>
        </div>
        <div id="chart" style="text-align: center;"></div>
        <!-- <script>
            // Modal 단어 빈도수 그래프
            $(document).ready(function() {
            $('#exampleModalCenter').on('shown.bs.modal', function(e){ 
                var chart = c3.generate({
                bindto: '#chart',
                size: {
                    height: 320*0.7,
                    width: 466*0.7
                },
                data: {
                    x: 'x',
                    columns: [
                        ['x', '2016', '2017', '2018', '2019', '2020'],
                        ['frequency', 50, 100, 70, 120, 200]
                    ],
                    type: 'spline',
                    colors: {
                        'frequency': '#ff9500'
                        }
                },
                axis: {
                        x: {
                            type: 'category' // this needed to load string x value
                        }
                    }
                });
            //   setInterval(function () {
            //     x = Math.random() % 100;
            //     y = Math.random() % 50;
            //     chart.load({
            //         columns: [
            //             ['frequency', x - y, 2*x + 2*y, x + y, x - 2*y, x + 2*y, 3*x - y]
            //         ]
            //     });
            //   }, 100);
                
            });
            });
        </script> -->
        </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
        <button type="button" class="btn btn-primary" onclick="location.href='trendywords.html'">더 학습하기</button>
        </div>
    </div>
</div>